<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.x docs-doc-page docs-doc-id-chat/shared-chat" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.1">
<title data-rh="true">Shared Chat | Twitch4J</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://twitch4j.github.io/chat/shared-chat"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.x"><meta data-rh="true" name="docsearch:version" content="1.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.x"><meta data-rh="true" property="og:title" content="Shared Chat | Twitch4J"><meta data-rh="true" name="description" content="Supported since v1.22.0"><meta data-rh="true" property="og:description" content="Supported since v1.22.0"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://twitch4j.github.io/chat/shared-chat"><link data-rh="true" rel="alternate" href="https://twitch4j.github.io/chat/shared-chat" hreflang="en"><link data-rh="true" rel="alternate" href="https://twitch4j.github.io/chat/shared-chat" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://E6S5VU7XKG-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Twitch4J" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><link rel="stylesheet" href="/assets/css/styles.b4f66cc0.css">
<script src="/assets/js/runtime~main.f46f45e5.js" defer="defer"></script>
<script src="/assets/js/main.8f6d8cd5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Twitch4J Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Twitch4J Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Twitch4J</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a><a href="https://twitch4j.github.io/javadoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Javadoc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.gg/FQ5vgW3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/chat/shared-chat">1.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/2.x/">2.x</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/chat/shared-chat">1.x</a></li></ul></div><a href="https://github.com/twitch4j/twitch4j" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Home</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/getting-started">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/chat/">Chat</a><button aria-label="Collapse sidebar category &#x27;Chat&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chat/join-channel">Join Channel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chat/leave-channel">Leave Channel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chat/send-message">Send Channel Message</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chat/send-private-message">Send Private Message</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/chat/shared-chat">Shared Chat</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/eventsub/">EventSub</a><button aria-label="Expand sidebar category &#x27;EventSub&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rest-helix/">API - Helix</a><button aria-label="Expand sidebar category &#x27;API - Helix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rest-tmi/">API - TMI</a><button aria-label="Expand sidebar category &#x27;API - TMI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/graphql/">API - GraphQL</a><button aria-label="Expand sidebar category &#x27;API - GraphQL&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pubsub/">PubSub</a><button aria-label="Expand sidebar category &#x27;PubSub&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/events/">Events</a><button aria-label="Expand sidebar category &#x27;Events&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/credentialmanager">CredentialManager</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/contribution/">Contributing</a><button aria-label="Expand sidebar category &#x27;Contributing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/acknowledgements">Acknowledgements</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/chat/"><span itemprop="name">Chat</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Shared Chat</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Shared Chat</h1></header>
<blockquote>
<p>Supported since v1.22.0</p>
</blockquote>
<p>Twitch now allows creators using Stream Together to effectively merge their chat rooms together.
In the future, Twitch will also allow Shared Chat sessions without mandating Stream Together usage.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>A Stream Together session currently supports up to six (6) participating channels.
Upon joining a Stream Together session, a broadcaster has a limited window of time wherein they can opt out of shared chat.</p></div></div>
<p>From a user&#x27;s perspective, their chat window includes more messages (sourced from the other channels)
and when they send a message, it is automatically shared with those other channels.
As messages arrive, the first-party interface includes the profile picture of the channel the message is sourced from.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Update to Twitch4J v1.22.0 (or later) to avoid edge cases where your bot could spam responses to Shared Chat messages.</p><p>By default, we drop mirrored messages that have already been observed, so each unique message is only acted upon once.
If you run a distributed bot, you will need to write Shared Chat logic yourself to avoid such edge cases.</p></div></div>
<p>As a result, each user message (<code>PRIVMSG</code>) sent in one chat is mirrored to the other chats in the Shared Chat session.</p>
<p>Similarly, most user notifications (<code>USERNOTICE</code>) are also shared with the other chat rooms in the session.<br>
<!-- -->In particular, subs, resubs, sub gifts, community sub gifts, gift paid upgrades, prime paid upgrades, pay it forward gifts,
incoming raids, and mod announcements are forwarded (while bits badge unlocks and charity donations are not forwarded).</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Twitch has suggested that the current set of supported <code>USERNOTICE</code> types that are forwarded during shared chat
is subject to change.</p></div></div>
<p>In addition, moderation actions (i.e., ban, timeout, unban, untimeout, warn) in one channel are automatically applied to all channels in the Shared Chat session.
Message deletions are mirrored to the other channels <em>if</em> the deletion occurred in the source channel (by source moderators).
Once the Shared Chat session concludes, <em>mirrored</em> bans, timeouts, and warnings are automatically lifted.
Streamers can use &quot;Shared Ban Info&quot; to keep users that were banned during the Shared Chat session as restricted chatters after the session ends.
These intricacies are explained in further detail within the <a href="https://link.twitch.tv/SharedChatMod" target="_blank" rel="noopener noreferrer">official help article</a>.</p>
<p>Since IRC tags do not indicate the source channel of mirrored moderation events, you can obtain this information via
<a href="https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/subscriptions/SubscriptionTypes.html#CHANNEL_MODERATE" target="_blank" rel="noopener noreferrer">EventSub</a> instead.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can detect which channels are participating in a given Shared Chat session
via <a href="https://dev.twitch.tv/docs/api/reference/#get-shared-chat-session" target="_blank" rel="noopener noreferrer"><code>TwitchHelix#getSharedChatSession(OAuth2Credential, String)</code></a>,
where the second argument is a channel&#x27;s ID.<br>
<!-- -->This endpoint does not require any scopes, so even app access tokens are sufficient.</p><p>Similarly, there are EventSub subscription types to track Shared Chat session updates in real-time.</p></div></div>
<p>You can read more about this feature in the <a href="https://dev.twitch.tv/docs/chat/irc/#shared-chat" target="_blank" rel="noopener noreferrer">official third-party developer documentation</a>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>While this page focuses on IRC, these concepts also apply to the chat-related EventSub subscription types.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-i-detect-shared-chat-messages">How do I detect Shared Chat messages?<a href="#how-do-i-detect-shared-chat-messages" class="hash-link" aria-label="Direct link to How do I detect Shared Chat messages?" title="Direct link to How do I detect Shared Chat messages?">​</a></h2>
<p>IRC events that can be mirrored during the Shared Chat session implement the <code>MirrorableEvent</code> interface.</p>
<p><code>MirrorableEvent#isMirrored</code> tells you whether the given event originally came from a different source channel.</p>
<p>Then you can use <code>MirrorableEvent#getSourceChannelId</code> to obtain the true source channel.</p>
<p>Further, you can use <code>MirrorableEvent#getSourceBadges</code> (and <code>MirrorableEvent#getSourceBadgeInfo</code>)
to obtain the chat badges associated with the message in the source channel.</p>
<p>When messages are mirrored, they are assigned new message IDs,
so you can obtain the original message ID via <code>MirrorableEvent#getSourceMessageId</code> (which is unnecessary for most bots).</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The following EventSub subscription types also distinguish shared events:
<a href="https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/subscriptions/SubscriptionTypes.html#CHANNEL_CHAT_MESSAGE" target="_blank" rel="noopener noreferrer"><code>channel.chat.message</code></a>,
<a href="https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/subscriptions/SubscriptionTypes.html#CHANNEL_CHAT_NOTIFICATION" target="_blank" rel="noopener noreferrer"><code>channel.chat.notification</code></a>,
and <a href="https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/subscriptions/SubscriptionTypes.html#CHANNEL_MODERATE" target="_blank" rel="noopener noreferrer"><code>channel.moderate</code></a>.</p><p>Please read the <a href="https://dev.twitch.tv/docs/eventsub/eventsub-subscription-types/" target="_blank" rel="noopener noreferrer">Twitch documentation</a>
or the <a href="https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/events/package-summary.html" target="_blank" rel="noopener noreferrer">javadoc</a>
to understand the updated event payloads.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-does-this-mean-for-my-application">What does this mean for my application?<a href="#what-does-this-mean-for-my-application" class="hash-link" aria-label="Direct link to What does this mean for my application?" title="Direct link to What does this mean for my application?">​</a></h2>
<p>Now, when you receive a message (e.g., <a href="https://twitch4j.github.io/javadoc/com/github/twitch4j/chat/events/channel/ChannelMessageEvent.html" target="_blank" rel="noopener noreferrer"><code>ChannelMessageEvent</code></a>),
it could be directly sent to the channel you have joined (i.e., <a href="https://twitch4j.github.io/javadoc/com/github/twitch4j/chat/events/AbstractChannelEvent.html" target="_blank" rel="noopener noreferrer"><code>AbstractChannelEvent#getChannel</code></a>),
or it could be mirrored from another channel (i.e., <code>MirrorableEvent#getSourceChannelId</code>).</p>
<p>Most moderation bots may not need to change their logic regarding acting upon user messages.
If such a bot observes the same message twice, it may try to execute duplicate moderation actions, but that is not a substantial concern.</p>
<p>However, bots that respond to chat commands <strong>should</strong> avoid replying to duplicated shared messages.<br>
<!-- -->The simplest approach is to ignore chat commands where <code>MirrorableEvent#isMirrored</code> is true.<br>
<!-- -->More sophisticated bots can conditionally reply to mirrored messages if the bot is not joined to the source channel and the source message id has not been observed already.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Twitch4J v1.22.0+ automatically drops duplicate mirrored messages, so most developers will not need to update any logic!
You can adjust the library&#x27;s treatment of Shared Chat messages via <code>MirroredMessagePolicy</code>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-edge-cases-should-i-know-about">What edge cases should I know about?<a href="#what-edge-cases-should-i-know-about" class="hash-link" aria-label="Direct link to What edge cases should I know about?" title="Direct link to What edge cases should I know about?">​</a></h2>
<ol>
<li>
<p>The main edge case to consider is when your bot is joined to multiple channels in a single Shared Chat session.<br>
<!-- -->As a result, for each user message, you could receive up to six (6) events!
When user messages can trigger bot responses in chat, you should validate the source channel to avoid replying up to six times.
Since messages are mirrored, all six response messages would appear in each of the six chat rooms (which can look like spam).<br>
<!-- -->However, when using <code>MirroredMessagePolicy.REJECT_IF_OBSERVED</code> (or <code>REJECT_ALL</code>), this concern does not apply
(unless you are running a distributed bot across multiple servers).</p>
</li>
<li>
<p>When your bot is joined to multiple channels in a single Shared Chat session, the two channels could have
different configurations for the bot, which can complicate determination of appropriate responses.</p>
</li>
<li>
<p>Since moderation actions are forwarded, the stricter response will tend to prevail (as timed-out users can be banned, but banned users cannot be timed-out).</p>
</li>
<li>
<p>While channel points redemptions with text input <em>are</em> mirrored to the other channels, currently redemptions without user input are not.</p>
</li>
<li>
<p>Mirrored channel points redemptions (with user input) lack context as to what reward was redeemed.</p>
</li>
<li>
<p>Channel-specific emotes <em>do</em> render accurately in the mirrored channels (in first-party chat), including cheermotes and follower emotes.</p>
</li>
<li>
<p>If your bot is <code>/restrict</code>ed in one channel in the Shared Chat session, it cannot send messages to other channels in the session (unless it is a moderator).
Yet, if a user is <code>/monitor</code>ed in one channel, this does not automatically apply to the other channels in the Shared Chat session.</p>
</li>
<li>
<p>Neither the <code>first-msg</code> nor the <code>returning-chatter</code> flags are populated on the mirrored messages.</p>
</li>
<li>
<p>When sending messages to a channel in a Shared Chat session, if you are joined to other channels
in the same session on a different websocket, you will receive events for your own messages.
However, if the other channels are joined on the same websocket, you will not receive events for your own messages.</p>
</li>
<li>
<p>If you are joined to many channels and start observing random disconnects, some channels may have started Shared Chat sessions causing your message buffer to fill up.
As a workaround, you can reduce the number of channels joined on each websocket connection via
<a href="https://twitch4j.github.io/javadoc/com/github/twitch4j/common/pool/SubscriptionConnectionPool.SubscriptionConnectionPoolBuilder.html#maxSubscriptionsPerConnection(int)" target="_blank" rel="noopener noreferrer"><code>TwitchChatConnectionPoolBuilder#maxSubscriptionsPerConnection</code></a>.</p>
</li>
<li>
<p>First-party moderation settings such as AutoMod configuration, Blocked Terms, and Chat Mode (e.g., emote only) only apply to messages sent in the corresponding source channel.
Thus, it can be possible to send a message in a Shared Chat session that contains a blocked term of another channel within the session.</p>
</li>
<li>
<p>Since this feature is complex and not widely tested yet, there may be bugs in Twitch&#x27;s implementation.</p>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/twitch4j/twitch4j.github.io/tree/master/docs/versioned_docs/version-1.x/chat/shared-chat.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-10-11T22:09:18.000Z" itemprop="dateModified">Oct 11, 2024</time></b> by <b>iProdigy</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/chat/send-private-message"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Send Private Message</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/eventsub/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">EventSub</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-do-i-detect-shared-chat-messages" class="table-of-contents__link toc-highlight">How do I detect Shared Chat messages?</a></li><li><a href="#what-does-this-mean-for-my-application" class="table-of-contents__link toc-highlight">What does this mean for my application?</a></li><li><a href="#what-edge-cases-should-i-know-about" class="table-of-contents__link toc-highlight">What edge cases should I know about?</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Twitch4J. Twitch4J is not affiliated, associated, authorized, endorsed by, or in any way officially connected with Twitch.</div></div></div></footer></div>
</body>
</html>