"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2506],{5706:(t,e,i)=>{i.r(e),i.d(e,{assets:()=>h,contentTitle:()=>r,default:()=>b,frontMatter:()=>c,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"eventsub/index","title":"EventSub","description":"EventSub is a transport-agnostic solution to receive real-time events from Twitch.","source":"@site/versioned_docs/version-1.x/eventsub/index.mdx","sourceDirName":"eventsub","slug":"/eventsub/","permalink":"/eventsub/","draft":false,"unlisted":false,"editUrl":"https://github.com/twitch4j/twitch4j.github.io/tree/master/docs/versioned_docs/version-1.x/eventsub/index.mdx","tags":[],"version":"1.x","lastUpdatedBy":"iProdigy","lastUpdatedAt":1721173267000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"version-1.x-docs","previous":{"title":"Shared Chat","permalink":"/chat/shared-chat"},"next":{"title":"Conduit","permalink":"/eventsub/conduit"}}');var s=i(4848),o=i(8453);const c={sidebar_position:5},r="EventSub",h={},a=[{value:"Transports",id:"transports",level:2},{value:"Subscription Basics",id:"subscription-basics",level:2}];function u(t){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,o.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"eventsub",children:"EventSub"})}),"\n",(0,s.jsx)(e.p,{children:"EventSub is a transport-agnostic solution to receive real-time events from Twitch."}),"\n",(0,s.jsxs)(e.p,{children:["Twitch4J ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/subscriptions/SubscriptionTypes.html",children:"implements"})," all the EventSub ",(0,s.jsx)(e.a,{href:"https://dev.twitch.tv/docs/eventsub/eventsub-subscription-types/",children:"subscription types"}),"\nand corresponding ",(0,s.jsx)(e.a,{href:"https://dev.twitch.tv/docs/eventsub/eventsub-reference/#events",children:"events"}),"."]}),"\n",(0,s.jsx)(e.admonition,{type:"note",children:(0,s.jsx)(e.p,{children:"Twitch plans to deprecate third-party PubSub in favor of EventSub.\nSimilarly, IRC will face additional restrictions (e.g., concurrent join limits) in favor of chat over EventSub.\nThus, you should try to use EventSub when possible."})}),"\n",(0,s.jsx)(e.h2,{id:"transports",children:"Transports"}),"\n",(0,s.jsx)(e.p,{children:"EventSub supports the following transport types:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./webhook",children:"Webhook"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./websocket",children:"WebSocket"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./conduit",children:"Conduit"})}),"\n"]}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsxs)(e.p,{children:["The library handles websockets for you, so this transport tends to be easier to use.",(0,s.jsx)("br",{}),"\nWebhooks, on the other hand, require more code on your end to establish an HTTPS webserver and keep the EventSub subscription healthy.",(0,s.jsx)("br",{}),"\nWhen webhooks are not feasible, backend applications can utilize conduits backed by websockets."]})}),"\n",(0,s.jsx)(e.h2,{id:"subscription-basics",children:"Subscription Basics"}),"\n",(0,s.jsxs)(e.p,{children:["To receive EventSub events, you must create an EventSub subscription.\nEach subscription has a ",(0,s.jsx)(e.code,{children:"type"}),", which identifies the type of event you wish to receive.\nTwitch list all of the public subscription types in their ",(0,s.jsx)(e.a,{href:"https://dev.twitch.tv/docs/eventsub/eventsub-subscription-types/",children:"documentation"}),"."]}),"\n",(0,s.jsxs)(e.p,{children:["Each subscription has a ",(0,s.jsx)(e.code,{children:"condition"}),", which identifies the parameters under which the event fires.\nFor example, ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/condition/ChannelEventSubCondition.html",children:"most"})," subscriptions are conditioned by the ID of the channel in which the event occurred."]}),"\n",(0,s.jsxs)(e.p,{children:["Each subscription has a ",(0,s.jsx)(e.code,{children:"cost"}),", which is determined by the type of authorization you have.\nBy default, the ",(0,s.jsx)(e.code,{children:"cost"})," of a subscription is 1, but is reduced to 0 if you have a user access token from the channel related to the subscription.\nEach transport mechanism imposes different limits on the total cost (i.e., ",(0,s.jsx)(e.code,{children:"max_total_cost"}),") across your enabled subscriptions for that transport type."]}),"\n",(0,s.jsxs)(e.p,{children:["To establish an EventSub subscription, you must obtain an instance of ",(0,s.jsx)(e.code,{children:"EventSubSubscription"}),", which is passed to ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/helix/TwitchHelix.html#createEventSubSubscription(java.lang.String,com.github.twitch4j.eventsub.EventSubSubscription)",children:(0,s.jsx)(e.code,{children:"TwitchHelix#createEventSubSubscription"})}),".\nIt is easiest to create ",(0,s.jsx)(e.code,{children:"EventSubSubscription"})," instances through our ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/subscriptions/SubscriptionTypes.html",children:(0,s.jsx)(e.code,{children:"SubscriptionTypes"})})," utility class: ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/subscriptions/SubscriptionType.html#prepareSubscription(java.util.function.Function,com.github.twitch4j.eventsub.EventSubTransport)",children:(0,s.jsx)(e.code,{children:"SubscriptionType#prepareSubscription"})})," creates a subscription for the specified condition and transport, which should be passed to ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/socket/IEventSubSocket.html#register(com.github.twitch4j.eventsub.EventSubSubscription)",children:(0,s.jsx)(e.code,{children:"IEventSubSocket#register"})})," (when using websocket) or ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/helix/TwitchHelix.html#createEventSubSubscription(java.lang.String,com.github.twitch4j.eventsub.EventSubSubscription)",children:(0,s.jsx)(e.code,{children:"TwitchHelix#createEventSubSubscription"})})," (when using webhook)."]}),"\n",(0,s.jsxs)(e.p,{children:["You can query your outstanding EventSub subscriptions via ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/helix/TwitchHelix.html#getEventSubSubscriptions(java.lang.String,com.github.twitch4j.eventsub.EventSubSubscriptionStatus,com.github.twitch4j.eventsub.subscriptions.SubscriptionType,java.lang.String,java.lang.String,java.lang.Integer)",children:(0,s.jsx)(e.code,{children:"TwitchHelix#getEventSubSubscriptions"})}),". This endpoint supports filtering by the subscription type, subscription status (e.g., enabled or disabled), and user id (for subscriptions related to a specific channel)."]}),"\n",(0,s.jsxs)(e.p,{children:["To delete an EventSub subscription, simply call ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/socket/IEventSubSocket.html#unregister(com.github.twitch4j.eventsub.EventSubSubscription)",children:(0,s.jsx)(e.code,{children:"IEventSubSocket#unregister"})})," (when using websocket) or ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/helix/TwitchHelix.html#getEventSubSubscriptions(java.lang.String,com.github.twitch4j.eventsub.EventSubSubscriptionStatus,com.github.twitch4j.eventsub.subscriptions.SubscriptionType,java.lang.String,java.lang.String,java.lang.Integer)",children:(0,s.jsx)(e.code,{children:"TwitchHelix#deleteEventSubSubscription"})})," (when using webhook)."]}),"\n",(0,s.jsxs)(e.admonition,{type:"tip",children:[(0,s.jsxs)(e.p,{children:["For webhooks and conduits, you can utilize ",(0,s.jsx)(e.a,{href:"https://twitch4j.github.io/javadoc/com/github/twitch4j/eventsub/subscriptions/UserAuthorizationRevokeType.html",children:(0,s.jsx)(e.code,{children:"user.authorization.revoke"})})," to track when users revoke authorization,\nso you can delete their EventSub subscriptions to avoid exceeding the ",(0,s.jsx)(e.code,{children:"max_total_cost"}),"."]}),(0,s.jsxs)(e.p,{children:["When the ",(0,s.jsx)(e.code,{children:"max_total_cost"})," is reached, new EventSub subscriptions cannot be created, even if they have zero cost."]})]}),"\n",(0,s.jsxs)(e.p,{children:["For further clarification, please read through Twitch's official ",(0,s.jsx)(e.a,{href:"https://dev.twitch.tv/docs/eventsub/manage-subscriptions/",children:"documentation"})," on managing EventSub subscriptions."]})]})}function b(t={}){const{wrapper:e}={...(0,o.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(u,{...t})}):u(t)}},8453:(t,e,i)=>{i.d(e,{R:()=>c,x:()=>r});var n=i(6540);const s={},o=n.createContext(s);function c(t){const e=n.useContext(o);return n.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function r(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:c(t.components),n.createElement(o.Provider,{value:e},t.children)}}}]);